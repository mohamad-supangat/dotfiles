# install tmux tmp if not exit

if "test ! -d ~/.tmux/plugins/tpm" \
   "run 'git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm && ~/.tmux/plugins/tpm/bin/install_plugins'"


set -g @plugin 'o0th/tmux-nova'
set -g @nova-nerdfonts true
set -g @nova-nerdfonts-left 
set -g @nova-nerdfonts-right 

set -g @nova-pane "#I#{?pane_in_mode,  #{pane_mode},}  #W"

set -g @nova-segment-mode "#{?client_prefix,Ω,ω}"
set -g @nova-segment-mode-colors "#50fa7b #282a36"
# set -g @nova-segment-binance "Dent USDT = $ #(~/.tmux/plugins/tmux-binance/scripts/price/dentusdt_price.sh)"
set -g @nova-segment-binance-colors "#50fa7b #282a36"
set -g @nova-segments-0-left "mode"
# set -g @nova-segments-0-right "binance"


# set -g @nova-rows 0

# set -g @nova-segments-1-left "binance"
# set -g @nova-segments-1-right ""

# List of plugins
# if-shell "test -f ~/.tmux.theme" "source .tmux.theme"

set -g @plugin 'tmux-plugins/tpm' # tmux plugin manager
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'christoomey/vim-tmux-navigator' # asdd vim integration key binding
# set -g @plugin 'nhdaly/tmux-better-mouse-mode' # add some
# set -g @themepack 'powerline/double/cyan' # set theme for tmux
set -g @plugin 'sainnhe/tmux-fzf'
set -g @plugin 'carljkempe/tmux-binance'

# set -g @tmux-gruvbox 'dark' # or 'light'
# set -g @plugin 'xamut/tmux-network-bandwidth'

set-option -g default-terminal "xterm-256color"
# set -g default-terminal "xterm-256color" # true color for tmux
# set -g default-terminal "xterm-kitty" # true color for tmux


set -ga terminal-overrides ",*:Tc"
set -ga terminal-overrides '*:Ss=\E[%p1%d q:Se=\E[ q'


# set -g default-terminal "tmux-256color"
# set -ga terminal-overrides ",*256col*:Tc"

set-option -g status-position top
set -g pane-border-status top
set -g pane-border-format "-"

set -g escape-time 0
set -g focus-events on

set -g history-limit 100000
set -g history-file ~/.tmux/log/tmuxhistory

set -g monitor-activity off
set -g visual-activity off
setw -g monitor-bell off
set -g bell-action none

# set -g set-clipboard on
setw -g mode-keys vi
setw -g wrap-search off

# WINDOW
set -g base-index 1
set -g renumber-windows on
setw -g automatic-rename on

# switch windows alt+number
bind-key -n M-1 select-window -t 1
bind-key -n M-2 select-window -t 2
bind-key -n M-3 select-window -t 3
bind-key -n M-4 select-window -t 4
bind-key -n M-5 select-window -t 5
bind-key -n M-6 select-window -t 6
bind-key -n M-7 select-window -t 7
bind-key -n M-8 select-window -t 8
bind-key -n M-9 select-window -t 9

# # OTHER'Slt
set -g set-titles on
set -g set-titles-string "#{pane_current_command}"
setw -g allow-rename on
# setw -g mode-style "fg=black, bg=brightblack"

# ## Clock mode
#   set -g clock-mode-colour white
#   set -g clock-mode-style 12

## Message
# set -g message-style "fg=red, bg=default"

# KEY BINDING
###############################################################
## Reload configuration
bind-key r source-file ~/.tmux.conf \; display-message "~/.tmux.conf reloaded"

## Split panel with same directory
unbind-key '"'
unbind-key %
bind-key v split-window -h -c "#{pane_current_path}"
bind-key b split-window -v -c "#{pane_current_path}"

## Switch panel
# bind-key h select-pane -L
# bind-key l select-pane -R
# bind-key k select-pane -U
# bind-key j select-pane -D

## Resize panel
bind-key C-h resize-pane -L 10
bind-key C-l resize-pane -R 10
bind-key C-j resize-pane -D 10
bind-key C-k resize-pane -U 10

# MOUSE
set -g mouse on
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "wl-copy -n"
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "wl-copy -n"

# set -g status-bg default
# set -g status-right '#(cat #{socket_path}-\#{session_id}-vimbridge)'
# set -g status-right-length 120
# set -g status-interval 0

# theme
# border colours
# set -g pane-border-fg blue
# set -g pane-active-border-fg blue
# set -g pane-active-border-bg default
#
# set -g pane-border-bg default
# set -g pane-active-border-fg blue
# set -g pane-active-border-bg default

run '~/.tmux/plugins/tpm/tpm'
